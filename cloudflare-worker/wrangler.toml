name = "flutter-analytics-api"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = [ "nodejs_compat" ]

# Cloudflare Workers configuration
# This worker will be deployed to: https://flutter-analytics-api.YOUR_SUBDOMAIN.workers.dev

[env.production]
vars = { ENVIRONMENT = "production" }

# ============================================================================
# SECRETS (Configure with: wrangler secret put SECRET_NAME)
# ============================================================================
# Required secrets:
# - DATABASE_URL: Neon PostgreSQL connection string
#   Get from: https://console.neon.tech (use the pooled connection string)
#   Set with: wrangler secret put DATABASE_URL
#
# - API_KEY: Authentication key for Flutter app
#   Set with: wrangler secret put API_KEY
#
# - IPINFO_TOKEN: Optional token for IP geolocation enrichment
#   Get free token at: https://ipinfo.io/signup (50k req/month free)
#   Set with: wrangler secret put IPINFO_TOKEN
#   (If not set, will use Cloudflare's built-in geo headers)
